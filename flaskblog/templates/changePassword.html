{% extends 'layout.html' %}
{% block content %}
	<div class="content-section">
	  <div class="media">
	    <div class="media-body">
	    </div>
	  </div>
		<form method='POST' action=''>
			{{ form.hidden_tag() }}
			<fieldset class='form-group'>
				<legend class='border-bottom mb-4'>change password</legend>
				<div class='form-group'>
					{{ form.oldpassword.label(class='form-control-label') }}
					
					{% if form.oldpassword.errors %}
						{{ form.oldpassword(class='form-control form-control-lg is-invalid') }}
						<div class='invalid-feedback'>
							{% for error in form.oldpassword.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
					{% else %}
					{{ form.oldpassword(class='form-control form-control-lg') }}
					{% endif %}
				</div>
				<div class='form-group'>
					{{ form.newpassword.label(class='form-control-label') }}
					
					{% if form.newpassword.errors %}
						{{ form.newpassword(class='form-control form-control-lg is-invalid') }}
						<div class='invalid-feedback'>
							{% for error in form.newpassword.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
					{% else %}
					{{ form.newpassword(class='form-control form-control-lg') }}
					{% endif %}	
				</div>
				<div class='form-group'>
					{{ form.confirmnewpassword.label(class='form-control-label') }}
					
					{% if form.confirmnewpassword.errors %}
						{{ form.confirmnewpassword(class='form-control form-control-lg is-invalid') }}
						<div class='invalid-feedback'>
							{% for error in form.confirmnewpassword.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
					{% else %}
					{{ form.confirmnewpassword(class='form-control form-control-lg') }}
					{% endif %}	
				</div>
			</fieldset>
			<div class='form-group'>
				{{ form.submit(class='btn btn-outline-info') }}
				<a style='float:right;'class='btn btn-outline-secondary' onclick='location.href="{{url_for("users.profile")}}";'>back to profile</a>
			</div>
		</form>
	</div>
	<div class='border-top pt-2'>
	<small class='text-muted ml-0'><button class='btn btn-link btn-xs' data-toggle="modal" data-target="#forgotModal">forgot your current password?</button></small>
	</div>	
		<!-- Modal -->
	<div class="modal fade" id="forgotModal" tabindex="-1" role="dialog" aria-labelledby="forgotModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="forgotModalLabel">Forgot your current password?</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">
	        To change your password without inputting the current one, you must request a password reset via email by logging out and visiting the forgot password page.
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
	        <form action="{{ url_for('users.logout') }}">
	        	<input type="submit" class="btn btn-danger" value="Log Out">
	        </form>
	      </div>
	    </div>
	  </div>
	</div>
{% endblock content %}